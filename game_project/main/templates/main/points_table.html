{% extends "base.html" %}
{% load main_tags %}
{% load static %}

{% block scripts %}
    <script src="{% static "js/points.js" %}" defer></script>
{% endblock %}


{% block content %}
    <a href="{% url "home" %}" class="btn btn-outline-success btn-sm" style="float: inline-start; font-family: Aclonica;">Home</a>
    <h5>Season {{ season.editon }}</h5>
    <div class="header-bar mt-5">
        <h3 style="display: inline;">Points Table</h3>
    </div>
    <hr>
    <table id="match-table" class="table">
        <tr>
            <th class="text-center">#</th>
            <th class="text-center">Teams</th>
            <th class="text-center">Total</th>
            <th class="text-center">Wins</th>
            <th class="text-center">Losses</th>
            <th class="text-center">Points</th>
        </tr>
        {% with teams_data|order as teams_data %}
            {% for key, values in teams_data.items %}
            <tr id="row-{{ forloop.counter }}" data-name="{{ key }}">
                <th class="text-center">{{ forloop.counter }}</th>
                <th style="font-size: large;" class="text-center">{{ key }}</th>
                {% for k, v in values.items %}
                    <td class="text-center">
                        {{ v }}
                    </td>
                {% endfor %}
                <th class="text-center">{{ values|points }}</th>
            </tr>
            {% endfor %}
        {% endwith %}
    </table>

    {% if season_matches.count == total_matches %}
        <button style="font-family: Aclonica;" id="play" data-season="{{ season.editon }}" class="btn btn-sm btn-outline-dark">Play-Offs</button>
    {% endif %}
    <p class="mt-3" style="color:#3FFF00; font-style: italic; font-weight: 500;">* The top four teams at the end will qualify for the IPL 2024 playoffs </p>
{% endblock %}